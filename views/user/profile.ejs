<%- include('../partials/header.ejs') %>

<main class="events">

    <section class="eventContent">
        <h1 class="profileName"><%=user.firstName%>'s Events</h1>
        <% if(events.length) {%>
            <% sports.forEach(category=>{ %>
                <h1 class="eventCategory"><%= category %></h1>
                <section class="eventCards">
                    <% events.forEach(event=>{ %>
                     <%   if(category === event.sport) {%>
                    <a class="eventLink" href="/events/<%=event._id%>">
                        <div class="cardContainer">
                            <h3><%=event.title%></h3>
                            <p><span>Location:</span> <%=event.location%></p>
                            <p><span>Date:</span> <%= DateTime.fromISO(event.date).toLocaleString(DateTime.DATE_HUGE) %></p>
                            <img src="<%=event.image%>" alt="Event Image"/>
                            <form>
                                <aside>
                                    <button type="submit" class="updateButton" formmethod="GET" formaction="/events/<%=event._id%>/edit">Update</button>
                                    <button type="submit" class="deleteButton" formmethod="POST" formaction="/events/<%=event._id%>?_method=DELETE">Delete</button>
                                </aside>
                            </form>
                                
                            
                        </div>
                    </a>
                    <% } }); %>
                </section>
        <% }); } else {%>
            <h2 class="eventCategory">You are currently hosting no events</h2>
            <% } %>
    </section>
</main>

<%- include('../partials/footer.ejs') %>